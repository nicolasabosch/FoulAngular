<form class="form-list">
	<form-list-header [crudForm]="this"></form-list-header>




	<div class="form-body">



		<h6 class="text-muted" tlt>Críterios de Búsqueda</h6>
		<div class="panel-search">

			<div class="row">
				<div class="col-sm-1 form-group">
					<label for="txtProjectID" tlt>
						Código
					</label>
					<input type="text" [(ngModel)]="search.ProjectID" class="form-control" autocomplete="off"
						style="text-align: right" numeric="2" tlt-placeholder="Código" name="txtProjectID" />
				</div>
				<div class="col-sm-4 form-group">
					<label for="txtProjectName" tlt>
						Nombre
					</label>
					<input type="text" [(ngModel)]="search.ProjectName" class="form-control" autocomplete="off"
						tlt-placeholder="Nombre" name="txtProjectName" />
				</div>
				<div class="col-sm-2 form-group">
					<label for="txtProjectDateFrom" tlt>
						Fecha Desde
					</label>
					<p class="input-group">
						<input type="text" ngbDatepicker #txtProjectDateFrom="ngbDatepicker"
							[(ngModel)]="search.ProjectDateFrom" name="txtProjectDateFrom" class="form-control"
							tlt-placeholder="Fecha Desde"
							onfocus="blur();">

						<span (click)="txtProjectDateFrom.toggle()" class="btn btn-outline-secondary"
							style="cursor: pointer;" tabindex="-1">
							<i class="far fa-calendar-alt"></i>
						</span>
					</p>
				</div>
				<div class="col-sm-2 form-group">
					<label for="txtProjectDateTo" tlt>
						Fecha Hasta
					</label>
					<p class="input-group">
						<input type="text" ngbDatepicker #txtProjectDateTo="ngbDatepicker"
							[(ngModel)]="search.ProjectDateTo" name="txtProjectDateTo" class="form-control"
							tlt-placeholder="Fecha Hasta"
							onfocus="blur();">

						<span (click)="txtProjectDateTo.toggle()" class="btn btn-outline-secondary"
							style="cursor: pointer;" tabindex="-1">
							<i class="far fa-calendar-alt"></i>
						</span>
					</p>
				</div>
				<div class="col-sm-3 form-group">
					<label for="txtProjectTypeID" tlt>
						Tipo de Proyecto
					</label>
					<p class="input-group">
						<select   [(ngModel)]="search.ProjectTypeID" class="form-control" autocomplete="off"
							tlt-placeholder="Tipo de Proyecto" name="txtProjectTypeID">
							<option [ngValue]=undefined selected tlt> - Todos -</option>
							<option [value]="T.ProjectTypeID"
								*ngFor="let T of ProjectTypeList | orderBy:'ProjectTypeName'">{{ T.ProjectTypeName }}
							</option>
						</select>
					</p>
				</div>
				<div class="col-sm-3 form-group">
				<label for="txtProjectStatusID" tlt>
					Estado de Proyecto
				</label>
				<p class="input-group">
					<select   [(ngModel)]="search.ProjectStatusID" class="form-control" autocomplete="off"
						tlt-placeholder="Estado de Proyecto" name="txtProjectStatusID">
						<option [ngValue]=undefined selected tlt> - Todos -</option>
						<option [value]="T.ProjectStatusID"
							*ngFor="let T of ProjectStatusList | orderBy:'ProjectStatusName'">{{ T.ProjectStatusName }}
						</option>
					</select>
				</p>
			</div>
				<div class="col-sm-4 form-group">
					<label for="txtCustomerID" tlt>
						Cliente
					</label>
					<p class="input-group">
						<input id="typeahead-template" type="text" class="form-control" [(ngModel)]="search.Customer"
							name="CustomerID" [ngbTypeahead]="tableSearch('Customer')" [focusFirst]='true'
							[editable]='false' autocomplete='off' crud-typeahead [displayFieldName]="'CustomerName'"
							tlt-placeholder="Cliente" (ngModelChange)="search.CustomerID = search.Customer?.CustomerID" />
						<button type="button" (click)="tableList(search,'Customer')" class="btn btn-open">
							<img src="assets/images/form-list.svg" />
						</button>
					</p>
				</div>
				<div class="col-sm-3 form-group">
					<crud-button-search-reset [crudForm]="this"></crud-button-search-reset>
				</div>
			</div>
		</div>

		<crud-button-new [crudForm]="this"></crud-button-new>



		<table class="table table-condensed table-bordered table-sm table-hover">
			<thead class="thead-dark" ngbTooltip="{{recordList?.length}} Registros" data-container="body">
				<tr>
					<th>
						<th-sort text="Código" fieldName="ProjectID" [(listOrder)]="recordListOrder"></th-sort>
					</th>
					<th>
						<th-sort text="Nombre" fieldName="ProjectName" [(listOrder)]="recordListOrder" default="ASC">
						</th-sort>
					</th>
					<th>
						<th-sort text="Fecha" fieldName="ProjectDate" [(listOrder)]="recordListOrder"></th-sort>
					</th>
					<th>
						<th-sort text="Tipo de Proyecto" fieldName="ProjectTypeName" [(listOrder)]="recordListOrder">
						</th-sort>
					</th>
					<th>
						<th-sort text="Estado de Proyecto" fieldName="ProjectStatusName" [(listOrder)]="recordListOrder">
						</th-sort>
					</th>
					<th>
						<th-sort text="Cliente" fieldName="CustomerName" [(listOrder)]="recordListOrder"></th-sort>
					</th>

				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let r of recordList | search:searchText.split(' ')[0] | search:searchText.split(' ')[1] | search:searchText.split(' ')[2] | orderBy:recordListOrder"
					(click)="viewRecord(r)" [ngClass]="{'table-info': r.ProjectID === selectedID}">
					<td class="td-right">{{r.ProjectID | number:'1.0-0'}}</td>
					<td>{{r.ProjectName}}</td>
					<td>{{r.ProjectDate | displayDate }}</td>
					<td>{{r.ProjectTypeName}}</td>
					<td>{{r.ProjectStatusName}}</td>
					<td>{{r.CustomerName}}</td>

				</tr>
			</tbody>
		</table>

	</div>
</form>
